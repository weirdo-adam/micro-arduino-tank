# 智能坦克控制系统 🚀

基于ESP8266的无线坦克炮台控制系统，可通过Web界面实时控制舵机旋转/俯仰和模拟开火。

## 功能特性 ✨

- 📶 WiFi远程控制（支持手机/PC浏览器访问）
- 🎮 双舵机控制：
  - 炮台**无级变速旋转**（带加速度控制）
  - 炮管**精准俯仰**（30°-150°范围）
- 🔥 模拟开火特效（LED视觉反馈）
- 💾 俯仰角度EEPROM记忆功能
- 📱 自适应Web控制界面

## 硬件组成 🛠️

| 组件      | 型号/参数         | 连接引脚 |
| --------- | ----------------- | -------- |
| 主控芯片  | ESP8266 (NodeMCU) | -        |
| 旋转舵机  | SG90 (180°)       | D4       |
| 俯仰舵机  | MG996R (270°)     | D5       |
| LED指示灯 | 板载LED           | Default  |

## 快速开始 🚀

### 1. 环境准备

- Clion IDE
- Platformio Cli
- 安装依赖库：
  ```bash
  ESP8266 Core (3.1.2)
  Servo.h (内置)
  ESP8266WebServer.h (内置)
  WiFiManager.h (需安装)
  ```

### 2. 烧录步骤

1. 克隆本仓库
2. 用Clion IDE打开`main.cpp`
3. 选择开发板：`NodeMCU 1.0 (ESP-12E Module)`
4. 设置上传速度：`115200`
5. 点击上传

### 3. 使用指南

1. 上电后自动创建AP：`Tank-Control-System`
2. 用手机连接该WiFi
3. 访问 `http://192.168.4.1` (IP会自动显示在串口)
4. 控制界面说明：
   - 🕹️ 左摇杆：控制炮台旋转速度和方向
   - 🎚️ 右滑块：调节俯仰角度
   - 🔘 红色按钮：触发开火动画

## 高级配置 ⚙️

### 参数调整

```cpp
// config.h 关键参数
const int ROTATION_ACCELERATION = 3;  // 旋转加速度(值越大加速越快)
const int ELEVATION_STEP = 1;         // 俯仰步进角度
const int MIN_ELEVATION_ANGLE = 30;   // 炮管最低角度
```

### 校准指南

1. 旋转舵机中位校准：
   ```cpp
   turretRotation.writeMicroseconds(1500); // 发送停止信号
   ```
2. 俯仰舵机限位保护：
   ```cpp
   cannonElevation.write(90); // 上电初始位置
   ```

## 故障排查 🔧

| 现象         | 可能原因            | 解决方案                  |
| ------------ | ------------------- | ------------------------- |
| 无法连接WiFi | WiFiManager配置失败 | 检查ESP8266的WiFi天线连接 |
| 舵机抖动     | 电源功率不足        | 使用外接5V 2A电源         |
| 网页无法加载 | 浏览器缓存问题      | Ctrl+F5强制刷新或清除缓存 |
